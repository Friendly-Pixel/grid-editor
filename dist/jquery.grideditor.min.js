!function(z){z.fn.gridEditor=function(I){var e=this,t=e.data("grideditor");if("getHtml"==I){if(t){t.deinit();var n=e.html();return t.init(),n}return e.html()}if("remove"!=I)return e.each(function(e,o){o=z(o);var a,s,r,c,l,d=z.extend({new_row_layouts:[[12],[6,6],[4,4,4],[3,3,3,3],[2,2,2,2,2,2],[2,8,2],[4,8],[8,4]],row_classes:[{label:"Example class",cssClass:"example-class"}],col_classes:[{label:"Example class",cssClass:"example-class"}],col_tools:[],row_tools:[],custom_filter:"",content_types:["tinymce"],valid_col_sizes:[1,2,3,4,5,6,7,8,9,10,11,12],source_textarea:""},I),f=["col-lg-","col-sm-","col-"],u=0,h=12;if(d.source_textarea){var t=z(d.source_textarea).val();if(0<t.length&&0==z("<div>"+t+"</div>").find(".row").addBack(".row").length){var n=E(),i=_(12).appendTo(n);i.find(".ge-content").html(t),t=i.html()}o.html(t)}if(o.children().length&&!o.find("div.row").length){var v=o.children();z('<div class="row"><div class="col-lg-12"/></div>').appendTo(o).find(".col-lg-12").append(v)}function m(e){var t=z(window);t.scrollTop()>s.offset().top&&t.scrollTop()<a.offset().top+a.height()?r.hasClass("ge-top")&&r.css({left:r.offset().left,width:r.outerWidth()}).removeClass("ge-top").addClass("ge-fixed"):r.hasClass("ge-fixed")&&r.css({left:"",width:""}).removeClass("ge-fixed").addClass("ge-top")}function g(e){var t=A(z(this).data("ge-content-type"));t&&(z(this).addClass("ge-rte-active",!0),t.init(d,z(this)))}function p(){x(!0),a.addClass("ge-editing"),a.find('.column, div[class*="col-"]').each(function(){var t=z(this),n=2,e=T(t);e.length&&(n=e[0].size);var i=t.attr("class");f.forEach(function(e){-1==i.indexOf(e)&&t.addClass(e+n)}),t.addClass("column")}),a.find(".column").each(function(){var e=z(this),t=z();e.children().each(function(){var e=z(this);e.is(".row, .ge-tools-drawer, .ge-content")?M(t):t=t.add(e)}),M(t)}),a.find(".row").each(function(){var e=z(this);if(!e.find("> .ge-tools-drawer").length){var t=z('<div class="ge-tools-drawer" />').prependTo(e);b(t,"Move","ge-move","bi bi-arrows-move"),b(t,"Settings","","bi bi-gear-fill",function(){n.toggle()}),d.row_tools.forEach(function(e){b(t,e.title||"",e.className||"",e.iconClass||"fa fa-wrench",e.on)}),b(t,"Remove row","","bi bi-trash",function(){window.confirm("Delete row?")&&e.slideUp(function(){e.remove()})}),b(t,"Add column","ge-add-column","bi bi-plus-circle",function(){e.append(_(3)),p()});var n=y(e,d.row_classes).appendTo(t)}}),a.find(".column").each(function(){var a=z(this);if(!a.find("> .ge-tools-drawer").length){var t=z('<div class="ge-tools-drawer" />').prependTo(a);b(t,"Move","ge-move","bi bi-arrows-move"),b(t,"Make column narrower\n(hold shift for min)","ge-decrease-col-width","bi bi-dash-lg",function(e){var t=d.valid_col_sizes,n=f[u],i=t.indexOf(C(a,n)),o=t[D(i-1,0,t.length-1)];e.shiftKey&&(o=t[0]),k(a,n,Math.max(o,1))}),b(t,"Make column wider\n(hold shift for max)","ge-increase-col-width","bi bi-plus-lg",function(e){var t=d.valid_col_sizes,n=f[u],i=t.indexOf(C(a,n)),o=t[D(i+1,0,t.length-1)];e.shiftKey&&(o=C(a)+function(e){return h-function(e){var t=f[u],n=0;return e.find('> [class*="'+t+'"]').each(function(){n+=C(z(this))}),n}(e)}(a.parent())),k(a,n,Math.min(o,h))}),b(t,"Settings","","bi bi-gear-fill",function(){e.toggle()}),d.col_tools.forEach(function(e){b(t,e.title||"",e.className||"",e.iconClass||"fa fa-wrench",e.on)}),b(t,"Remove col","","bi bi-dash-circle",function(){window.confirm("Delete column?")&&a.animate({opacity:"hide",width:"hide",height:"hide"},400,function(){a.remove()})}),b(t,"Add row","ge-add-row","fa fa-plus-circle",function(){var e=E();a.append(e),e.append(_(6)).append(_(6)),p()});var e=y(a,d.col_classes).appendTo(t)}}),function(){function e(e,t){t.placeholder.css({height:t.item.outerHeight()})}a.find(".row").sortable({items:"> .column",connectWith:".ge-canvas .row",handle:"> .ge-tools-drawer .ge-move",start:e,tolerance:"pointer",helper:"clone"}),a.add(a.find(".column")).sortable({items:"> .row, > .ge-content",connectsWith:".ge-canvas, .ge-canvas .column",handle:"> .ge-tools-drawer .ge-move",start:e,helper:"clone"})}(),R(u)}function w(){a.removeClass("ge-editing");a.find(".ge-content").removeClass("ge-rte-active").each(function(){var e=z(this);A(e.data("ge-content-type")).deinit(d,e)});a.find(".ge-tools-drawer").remove(),a.add(a.find(".column")).add(a.find(".row")).sortable("destroy"),x(!1)}function b(e,t,n,i,o){var a=z('<a title="'+t+'" class="'+n+'"><i class="'+i+'"></i></a>').appendTo(e);"function"==typeof o&&a.on("click",o),"object"==typeof o&&z.each(o,function(e,t){a.on(e,t)})}function y(n,e){var t=z('<div class="ge-details" />');z('<input class="ge-id" />').attr("placeholder","id").val(n.attr("id")).attr("title","Set a unique identifier").appendTo(t).change(function(){n.attr("id",this.value)});var i=z('<div class="btn-group" />').appendTo(t);return e.forEach(function(e){var t=z('<a class="btn btn-sm btn-default" />').html(e.label).attr("title",e.title?e.title:'Toggle "'+e.label+'" styling').toggleClass("active btn-primary",n.hasClass(e.cssClass)).on("click",function(){t.toggleClass("active btn-primary"),n.toggleClass(e.cssClass,t.hasClass("active"))}).appendTo(i)}),t}function C(e,t){for(var n=T(e),i=0;i<n.length;i++)if(n[i].colClass==t)return n[i].size;return n.length?n[0].size:null}function T(n){var i=[];return f.forEach(function(e){var t=new RegExp(e+"(\\d+)","i");t.test(n.attr("class"))&&i.push({colClass:e,size:parseInt(t.exec(n.attr("class"))[1])})}),i}function k(e,t,n){var i=new RegExp("("+t+"(\\d+))","i").exec(e.attr("class"));i&&parseInt(i[2])!==n?e.switchClass(i[1],t+n,50):e.addClass(t+n)}function E(){return z('<div class="row" />')}function _(t){return z("<div/>").addClass(f.map(function(e){return e+t}).join(" ")).append(j().html(A(d.content_types[0]).initialContent))}function x(n){d.custom_filter.length&&z.each(d.custom_filter,function(e,t){"string"==typeof t&&(t=window[t]),t(a,n)})}function M(e){if(e.length){var t=j().insertAfter(e.last());e.appendTo(t),e=z()}}function j(){return z("<div/>").addClass("ge-content ge-content-type-"+d.content_types[0]).attr("data-ge-content-type",d.content_types[0])}function R(n){u=n;["ge-layout-desktop","ge-layout-tablet","ge-layout-phone"].forEach(function(e,t){a.toggleClass(e,t==n)})}function A(e){return z.fn.gridEditor.RTEs[e]}function D(e,t,n){return Math.min(n,Math.max(t,e))}!function(){a=o.addClass("ge-canvas"),l=z('<textarea class="ge-html-output"/>').insertBefore(a),s=z('<div class="ge-mainControls" />').insertBefore(l),r=z('<div class="ge-wrapper ge-top" />').appendTo(s),c=z('<div class="ge-addRowGroup btn-group" />').appendTo(r),z.each(d.new_row_layouts,function(e,n){var t=z('<a class="btn btn-sm btn-primary" />').attr("title","Add row "+n.join("-")).on("click",function(){var t=E().appendTo(a);n.forEach(function(e){_(e).appendTo(t)}),p(),t[0].scrollIntoView&&t[0].scrollIntoView({behavior:"smooth"})}).appendTo(c);t.append('<i class="bi bi-plus-lg"></i>');n.join(" - ");var i='<div class="row ge-row-icon">';n.forEach(function(e){i+='<div class="column col-'+e+'"/>'}),i+="</div>",t.append(i)});var t=z('<div class="dropdown pull-right ge-layout-mode"><button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-bs-toggle="dropdown">Desktop</button><div class="dropdown-menu" role="menu"><a class="dropdown-item" data-width="auto" title="Desktop">Desktop</a><a class="dropdown-item" title="Tablet">Tablet<a class="dropdown-item" title="Phone">Phone</a></div></div>').on("click","a",function(){var e=z(this);R(e.index()),t.find("button").text(e.text())}).appendTo(r),e=z('<div class="btn-group pull-right"/>').appendTo(r),n=z('<button title="Edit Source Code" type="button" class="btn btn-sm btn-primary gm-edit-mode"><i class="bi bi-code-slash"></i><i class="fa fa-chevron-right"></i></span></button>').on("click",function(){n.hasClass("active")?(a.empty().html(l.val()).show(),p(),l.hide()):(w(),l.height(.8*z(window).height()).val(a.html()).show(),a.hide()),n.toggleClass("active btn-danger")}).appendTo(e),i=z('<button title="Preview" type="button" class="btn btn-sm btn-primary gm-preview"><i class="fa fa-eye"></i></button>').on("mouseenter",function(){a.removeClass("ge-editing")}).on("click",function(){i.toggleClass("active btn-danger").trigger("mouseleave")}).on("mouseleave",function(){i.hasClass("active")||a.addClass("ge-editing")}).appendTo(e);z(window).on("scroll",m),a.on("click",".ge-content",g)}(),p(),o.data("grideditor",{init:p,deinit:w,remove:function(){w(),s.remove(),l.remove(),z(window).off("scroll",m),a.off("click",".ge-content",g),a.removeData("grideditor")}})}),e;t&&t.remove()},z.fn.gridEditor.RTEs={}}(jQuery),function(a){a.fn.gridEditor.RTEs.ckeditor={init:function(i,e){window.CKEDITOR||console.error("CKEditor not available! Make sure you loaded the ckeditor and jquery adapter js files.");var o=this;e.each(function(){var e=a(this);if(!e.hasClass("active")){e.html()==o.initialContent&&e.html("&nbsp;"),e.addClass("active").attr("contenteditable","true");var t=a.extend({},i.ckeditor&&i.ckeditor.config?i.ckeditor.config:{},{on:{instanceReady:function(e){var t;try{t=i.ckeditor.config.on.instanceReady}catch(e){}t&&t.call(this,e),n.focus()}}}),n=CKEDITOR.inline(e.get(0),t)}})},deinit:function(e,t){t.filter(".active").each(function(){var e=a(this);a.each(CKEDITOR.instances,function(e,t){t.destroy()}),e.removeClass("active cke_focus").removeAttr("id").removeAttr("style").removeAttr("spellcheck").removeAttr("contenteditable")})},initialContent:"<p>Lorem initius... </p>"}}(jQuery),function(o){o.fn.gridEditor.RTEs.summernote={init:function(n,e){jQuery().summernote||console.error("Summernote not available! Make sure you loaded the Summernote js file.");var i=this;e.each(function(){var t=o(this);if(!t.hasClass("active")){t.html()==i.initialContent&&t.html(""),t.addClass("active");var e=o.extend(!0,{},n.summernote&&n.summernote.config?n.summernote.config:{},{tabsize:2,airMode:!0,callbacks:{onInit:function(){var e;try{e=n.summernote.config.callbacks.onInit}catch(e){}e&&e.call(this),t.summernote("focus")}}});t.summernote(e)}})},deinit:function(e,t){t.filter(".active").each(function(){var e=o(this);e.summernote("destroy"),e.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(jQuery),function(o){o.fn.gridEditor.RTEs.tinymce={init:function(n,e){window.tinymce||console.error("tinyMCE not available! Make sure you loaded the tinyMCE js file."),e.tinymce||console.error("tinyMCE jquery integration not available! Make sure you loaded the jquery integration plugin.");var i=this;e.each(function(){var e=o(this);if(!e.hasClass("active")){e.html()==i.initialContent&&e.html(""),e.addClass("active");var t=o.extend({},n.tinymce&&n.tinymce.config?n.tinymce.config:{},{inline:!0,oninit:function(e){var t;o("#"+e.settings.id).focus();try{t=n.tinymce.config.oninit}catch(e){}t&&t.call(this)}});e.tinymce(t)}})},deinit:function(e,t){t.filter(".active").each(function(){var e=o(this),t=e.tinymce();t&&t.remove(),e.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(jQuery);
//# sourceMappingURL=jquery.grideditor.min.js.map