!function(z){z.fn.gridEditor=function(I){var t=this,e=t.data("grideditor");if("getHtml"==I){if(e){e.deinit();var n=t.html();return e.init(),n}return t.html()}if("remove"!=I)return t.each(function(t,a){a=z(a);var i,s,r,c,l,d=z.extend({new_row_layouts:[[12],[6,6],[4,4,4],[3,3,3,3],[2,2,2,2,2,2],[2,8,2],[4,8],[8,4]],row_classes:[{label:"Example class",cssClass:"example-class"}],col_classes:[{label:"Example class",cssClass:"example-class"}],col_tools:[],row_tools:[],custom_filter:"",content_types:["tinymce"],valid_col_sizes:[1,2,3,4,5,6,7,8,9,10,11,12],source_textarea:""},I),f=["col-lg-","col-sm-","col-"],u=0,h=12;if(d.source_textarea){var e=z(d.source_textarea).val();if(0<e.length&&0==z("<div>"+e+"</div>").find(".row").addBack(".row").length){var n=E(),o=_(12).appendTo(n);o.find(".ge-content").html(e),e=o.html()}a.html(e)}if(a.children().length&&!a.find("div.row").length){var v=a.children();z('<div class="row"><div class="col-lg-12"/></div>').appendTo(a).find(".col-lg-12").append(v)}function m(t){var e=z(window);e.scrollTop()>s.offset().top&&e.scrollTop()<i.offset().top+i.height()?r.hasClass("ge-top")&&r.css({left:r.offset().left,width:r.outerWidth()}).removeClass("ge-top").addClass("ge-fixed"):r.hasClass("ge-fixed")&&r.css({left:"",width:""}).removeClass("ge-fixed").addClass("ge-top")}function g(t){if(!z(this).hasClass("ge-rte-active")){var e=A(z(this).data("ge-content-type"));e&&(z(this).addClass("ge-rte-active",!0),e.init(d,z(this)))}}function p(){x(!0),i.addClass("ge-editing"),i.find('.column, div[class*="col-"]').each(function(){var e=z(this),n=2,t=T(e);t.length&&(n=t[0].size);var o=e.attr("class");f.forEach(function(t){-1==o.indexOf(t)&&e.addClass(t+n)}),e.addClass("column")}),i.find(".column").each(function(){var t=z(this),e=z();t.children().each(function(){var t=z(this);t.is(".row, .ge-tools-drawer, .ge-content")?M(e):e=e.add(t)}),M(e)}),i.find(".row").each(function(){var t=z(this);if(!t.find("> .ge-tools-drawer").length){var e=z('<div class="ge-tools-drawer" />').prependTo(t);y(e,"Move","ge-move","fa fa-arrows-alt"),y(e,"Settings","","fa fa-cog",function(){n.toggle()}),d.row_tools.forEach(function(t){y(e,t.title||"",t.className||"",t.iconClass||"fa fa-wrench",t.on)}),y(e,"Remove row","","fa fa-trash-alt",function(){window.confirm("Delete row?")&&t.slideUp(function(){t.remove()})}),y(e,"Add column","ge-add-column","fa fa-plus-circle",function(){t.append(_(3)),p()});var n=C(t,d.row_classes).appendTo(e)}}),i.find(".column").each(function(){var i=z(this);if(!i.find("> .ge-tools-drawer").length){var e=z('<div class="ge-tools-drawer" />').prependTo(i);y(e,"Move","ge-move","fa fa-arrows-alt"),y(e,"Make column narrower\n(hold shift for min)","ge-decrease-col-width","fa fa-minus",function(t){var e=d.valid_col_sizes,n=f[u],o=e.indexOf(b(i,n)),a=e[D(o-1,0,e.length-1)];t.shiftKey&&(a=e[0]),k(i,n,Math.max(a,1))}),y(e,"Make column wider\n(hold shift for max)","ge-increase-col-width","fa fa-plus",function(t){var e=d.valid_col_sizes,n=f[u],o=e.indexOf(b(i,n)),a=e[D(o+1,0,e.length-1)];t.shiftKey&&(a=b(i)+function(t){return h-function(t){var e=f[u],n=0;return t.find('> [class*="'+e+'"]').each(function(){n+=b(z(this))}),n}(t)}(i.parent())),k(i,n,Math.min(a,h))}),y(e,"Settings","","fa fa-cog",function(){t.toggle()}),d.col_tools.forEach(function(t){y(e,t.title||"",t.className||"",t.iconClass||"fa fa-wrench",t.on)}),y(e,"Remove col","","fa fa-trash-alt",function(){window.confirm("Delete column?")&&i.animate({opacity:"hide",width:"hide",height:"hide"},400,function(){i.remove()})}),y(e,"Add row","ge-add-row","fa fa-plus-circle",function(){var t=E();i.append(t),t.append(_(6)).append(_(6)),p()});var t=C(i,d.col_classes).appendTo(e)}}),function(){function t(t,e){e.placeholder.css({height:e.item.outerHeight()})}i.find(".row").sortable({items:"> .column",connectWith:".ge-canvas .row",handle:"> .ge-tools-drawer .ge-move",start:t,tolerance:"pointer",helper:"clone"}),i.add(i.find(".column")).sortable({items:"> .row, > .ge-content",connectWith:".ge-canvas, .ge-canvas .column",handle:"> .ge-tools-drawer .ge-move",start:t,helper:"clone"})}(),R(u)}function w(){i.removeClass("ge-editing");i.find(".ge-content").removeClass("ge-rte-active").each(function(){var t=z(this);A(t.data("ge-content-type")).deinit(d,t)});i.find(".ge-tools-drawer").remove(),i.add(i.find(".column")).add(i.find(".row")).sortable("destroy"),x(!1)}function y(t,e,n,o,a){var i=z('<a title="'+e+'" class="'+n+'"><i class="'+o+'"></i></a>').appendTo(t);"function"==typeof a&&i.on("click",a),"object"==typeof a&&z.each(a,function(t,e){i.on(t,e)})}function C(n,t){var e=z('<div class="ge-details" />');z('<input class="ge-id" />').attr("placeholder","id").val(n.attr("id")).attr("title","Set a unique identifier").appendTo(e).change(function(){n.attr("id",this.value)});var o=z('<div class="btn-group" />').appendTo(e);return t.forEach(function(t){var e=z('<a class="btn btn-sm btn-default" />').html(t.label).attr("title",t.title?t.title:'Toggle "'+t.label+'" styling').toggleClass("active btn-primary",n.hasClass(t.cssClass)).on("click",function(){e.toggleClass("active btn-primary"),n.toggleClass(t.cssClass,e.hasClass("active"))}).appendTo(o)}),e}function b(t,e){for(var n=T(t),o=0;o<n.length;o++)if(n[o].colClass==e)return n[o].size;return n.length?n[0].size:null}function T(n){var o=[];return f.forEach(function(t){var e=new RegExp(t+"(\\d+)","i");e.test(n.attr("class"))&&o.push({colClass:t,size:parseInt(e.exec(n.attr("class"))[1])})}),o}function k(t,e,n){var o=new RegExp("("+e+"(\\d+))","i").exec(t.attr("class"));o&&parseInt(o[2])!==n?t.switchClass(o[1],e+n,50):t.addClass(e+n)}function E(){return z('<div class="row" />')}function _(e){return z("<div/>").addClass(f.map(function(t){return t+e}).join(" ")).append(j().html(A(d.content_types[0]).initialContent))}function x(n){d.custom_filter.length&&z.each(d.custom_filter,function(t,e){"string"==typeof e&&(e=window[e]),e(i,n)})}function M(t){if(t.length){var e=j().insertAfter(t.last());t.appendTo(e),t=z()}}function j(){return z("<div/>").addClass("ge-content ge-content-type-"+d.content_types[0]).attr("data-ge-content-type",d.content_types[0])}function R(n){u=n;["ge-layout-desktop","ge-layout-tablet","ge-layout-phone"].forEach(function(t,e){i.toggleClass(t,e==n)})}function A(t){return z.fn.gridEditor.RTEs[t]}function D(t,e,n){return Math.min(n,Math.max(e,t))}!function(){i=a.addClass("ge-canvas"),l=z('<textarea class="ge-html-output"/>').insertBefore(i),s=z('<div class="ge-mainControls" />').insertBefore(l),r=z('<div class="ge-wrapper ge-top" />').appendTo(s),c=z('<div class="ge-addRowGroup btn-group" />').appendTo(r),z.each(d.new_row_layouts,function(t,n){var e=z('<a class="btn btn-sm btn-primary" />').attr("title","Add row "+n.join("-")).on("click",function(){var e=E().appendTo(i);n.forEach(function(t){_(t).appendTo(e)}),p(),e[0].scrollIntoView&&e[0].scrollIntoView({behavior:"smooth"})}).appendTo(c);e.append('<i class="fa fa-plus"></i>');n.join(" - ");var o='<div class="row ge-row-icon">';n.forEach(function(t){o+='<div class="column col-'+t+'"/>'}),o+="</div>",e.append(o)});var e=z('<div class="dropdown pull-right ge-layout-mode"><button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown">Desktop</button><div class="dropdown-menu" role="menu"><a class="dropdown-item" data-width="auto" title="Desktop">Desktop</a><a class="dropdown-item" title="Tablet">Tablet<a class="dropdown-item" title="Phone">Phone</a></div></div>').on("click","a",function(){var t=z(this);R(t.index()),e.find("button").text(t.text())}).appendTo(r),t=z('<div class="btn-group pull-right"/>').appendTo(r),n=z('<button title="Edit Source Code" type="button" class="btn btn-sm btn-primary gm-edit-mode"><i class="fa fa-chevron-left"></i><i class="fa fa-chevron-right"></i></span></button>').on("click",function(){n.hasClass("active")?(i.empty().html(l.val()).show(),p(),l.hide()):(w(),l.height(.8*z(window).height()).val(i.html()).show(),i.hide()),n.toggleClass("active btn-danger")}).appendTo(t),o=z('<button title="Preview" type="button" class="btn btn-sm btn-primary gm-preview"><i class="fa fa-eye"></i></button>').on("mouseenter",function(){i.removeClass("ge-editing")}).on("click",function(){o.toggleClass("active btn-danger").trigger("mouseleave")}).on("mouseleave",function(){o.hasClass("active")||i.addClass("ge-editing")}).appendTo(t);z(window).on("scroll",m),i.on("click",".ge-content",g)}(),p(),a.data("grideditor",{init:p,deinit:w,remove:function(){w(),s.remove(),l.remove(),z(window).off("scroll",m),i.off("click",".ge-content",g),i.removeData("grideditor")}})}),t;e&&e.remove()},z.fn.gridEditor.RTEs={}}(jQuery),function(i){i.fn.gridEditor.RTEs.ckeditor={init:function(o,t){window.CKEDITOR||console.error("CKEditor not available! Make sure you loaded the ckeditor and jquery adapter js files.");var a=this;t.each(function(){var t=i(this);if(!t.hasClass("active")){t.html()==a.initialContent&&t.html("&nbsp;"),t.addClass("active").attr("contenteditable","true");var e=i.extend({},o.ckeditor&&o.ckeditor.config?o.ckeditor.config:{},{on:{instanceReady:function(t){var e;try{e=o.ckeditor.config.on.instanceReady}catch(t){}e&&e.call(this,t),n.focus()}}}),n=CKEDITOR.inline(t.get(0),e)}})},deinit:function(t,e){e.filter(".active").each(function(){var t=i(this);i.each(CKEDITOR.instances,function(t,e){e.destroy()}),t.removeClass("active cke_focus").removeAttr("id").removeAttr("style").removeAttr("spellcheck").removeAttr("contenteditable")})},initialContent:"<p>Lorem initius... </p>"}}(jQuery),function(a){a.fn.gridEditor.RTEs.summernote={init:function(n,t){jQuery().summernote||console.error("Summernote not available! Make sure you loaded the Summernote js file.");var o=this;t.each(function(){var e=a(this);if(!e.hasClass("active")){e.html()==o.initialContent&&e.html(""),e.addClass("active");var t=a.extend(!0,{},n.summernote&&n.summernote.config?n.summernote.config:{},{tabsize:2,airMode:!0,callbacks:{onInit:function(){var t;try{t=n.summernote.config.callbacks.onInit}catch(t){}t&&t.call(this),e.summernote("focus")}}});e.summernote(t)}})},deinit:function(t,e){e.filter(".active").each(function(){var t=a(this);t.summernote("destroy"),t.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(jQuery),function(a){a.fn.gridEditor.RTEs.tinymce={init:function(n,t){window.tinymce||console.error("tinyMCE not available! Make sure you loaded the tinyMCE js file."),t.tinymce||console.error("tinyMCE jquery integration not available! Make sure you loaded the jquery integration plugin.");var o=this;t.each(function(){var t=a(this);if(!t.hasClass("active")){t.html()==o.initialContent&&t.html(""),t.addClass("active");var e=a.extend({},n.tinymce&&n.tinymce.config?n.tinymce.config:{},{inline:!0,oninit:function(t){var e;a("#"+t.settings.id).focus();try{e=n.tinymce.config.oninit}catch(t){}e&&e.call(this)}});t.tinymce(e)}})},deinit:function(t,e){e.filter(".active").each(function(){var t=a(this),e=t.tinymce();e&&e.remove(),t.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(jQuery);
//# sourceMappingURL=jquery.grideditor.min.js.map